!function(){"use strict";function a(){var a={reloadOnResize:!0},b={lg:"(min-width: 1200px)",md:"(min-width: 992px) and (max-width: 1199px)",sm:"(min-width: 768px) and (max-width: 991px)",xs:"(max-width: 767px)",retina:"only screen and (min-device-pixel-ratio: 2), only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx)",phone:"(max-width: 767px)",tablet:"(min-width: 768px) and (max-width: 1024px)",desktop:"(min-width: 1025px)",portrait:"(orientation: portrait)",landscape:"(orientation: landscape)"},c={};this.config=function(b){angular.extend(a,b||{})},this.addRules=function(a){angular.extend(b,a||{})},this.addExtensions=function(a){angular.extend(c,a||{})},this.$get=["screenSize","$window","$log","$rootScope","$state",function(d,e,i,j,k){function l(){d.rules=b,angular.forEach(Object.keys(c),function(a){var b=r(c[a]);i.debug("Handling extension",a,"with rules",b),w[q(a)]=p(b,a)}),m()}function m(){function b(){var a=k.current;if(a){var b=v(a);if(b&&!w.is(h)){var d=w.matchingRules();i.log("Current match",h,"is no longer valid. Looking for a new match in",d),angular.forEach(b,function(a){w.is(a)&&(i.log("Perform reload because of a new match",a,"while current match is",h),c())})}}}function c(){i.log("doReload to state",k.current.name),k.reload(k.current)}window.addEventListener("resize",function(){i.debug("Resizing. Current matching rules",o(),". Current layout",h),a.reloadOnResize&&b()})}function n(a){return!(!angular.isString(a)||!g(this.matchingRules(),t(a)).length)||(a in c?this[q(a)]():a in this.screenSize.rules?this.screenSize.is(a):!!angular.isArray(a)&&p(a)())}function o(){var a=[];return angular.forEach(d.rules,function(b,c){var d=window.matchMedia(b).matches;d&&a.push(c)}),a}function p(a,b){var c=s(a);return c?(b&&(i.debug("Add rule ",c,"with key",b,"to screenSize service"),w.screenSize.rules[b]=c),function(){return w.screenSize.is(c)}):(i.debug("Build a complex rule"),function(){var b=!0;return angular.forEach(a,function(a){angular.isString(a)?b&=d.is(a):angular.isFunction(a)&&(b&=a(w))}),!!b})}function q(a){return"is"+f(a)}function r(a){return angular.isArray(a)?a:[a]}function s(a){var b=a.map(function(a){var b=t(a);return b.map(u).join(",")}).join(" and ");if(b.indexOf("undefined")===-1)return b}function t(a){return a.split(/\s*,\s*/g)}function u(a){return w.screenSize.rules[a]}function v(a){return(a.data||{}).responsive}var w={screenSize:d,is:n,matchingRules:o};return l(),w}]}function b(){return{restrict:"A",require:"mfwResponsiveMatch",link:function(a,b,c,d){var e=c.mfwResponsiveMatch||j;d.bindTo(angular.element(b),e)},controller:["$mfwResponsive",function(a){function b(b,c){function d(a,d){d?b.addClass(c+a):b.removeClass(c+a)}angular.forEach(Object.keys(a.screenSize.rules),function(b){d(b,a.is(b)),a.screenSize.on(b,function(){d(b,a.is(b))})})}this.bindTo=b}]}}function c(a,b){return{restrict:"A",terminal:!0,priority:1001,compile:function(c){c.removeAttr("mfw-responsive-when");var d=e("mfwWhen");c.attr("ng-if",d+"()");var f=a(c,null,1500);return function(a,c,e){var g=e.mfwResponsiveWhen;a[d]=function(){return b.is(g)},f(a)}}}}function d(a){a.decorator("views",function(a,b){var c={},d=b(a),e=[];return angular.forEach(d,function(a,b){var d=a.responsive;if(d){e=e.concat(Object.keys(d));var f=angular.copy(a);f.templateProvider=["$templateCache","$templateFactory","$mfwResponsive","$log",function(a,b,c,e){var f=null,g=Object.keys(d).filter(c.is,c);if(g.length){g.length>1&&e.warn("More than one rule (",g,") apply for current screen size:",c.matchingRules());var i=g[0];h=i,f=d[i],e.log("Resolved layout",i,"with templateUrl",f)}return f||e.error("No templateUrl found for responsiveConfig",d,"current layout is",c.matchingRules()),b.fromUrl(f)}],c[b]=f}else c[b]=a}),a.data=angular.extend(a.data||{},{responsive:e}),c})}function e(a){var b=Math.ceil(1e3*Math.random())+1;return a+b}function f(a){var b=a.replace(/([\:\-\_]+(.))/g,function(a,b,c,d){return d?c.toUpperCase():c});return b.charAt(0).toUpperCase()+b.substr(1)}function g(a,b){for(var c=a.length>b.length?b:a,d=[],e=0;e<c.length;e++){var f=c[e];a.indexOf(f)!==-1&&b.indexOf(f)!==-1&&d.push(f)}return d}var h,i=angular.module("mfw.responsive",["ui.router","matchMedia"]),j="device-";i.provider("$mfwResponsive",a),i.directive("mfwResponsiveMatch",b),b.$inject=[],i.directive("mfwResponsiveWhen",c),c.$inject=["$compile","$mfwResponsive"],i.config(d),d.$inject=["$stateProvider"]}();
//# sourceMappingURL=mfw-responsive.service.min.js.map